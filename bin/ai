#!/usr/bin/env php
<?php
require __DIR__ . '/../vendor/autoload.php';

use App\Colors;
use App\FakeAIService;
use App\OllamaService;


echo Colors::CYAN . "=== Bienvenido a Botcito v2.0 ===" . Colors::RESET . "\n";
echo "Escribe 'salir' para terminar.\n\n";

$AI = new FakeAIService();
// $AI = new OllamaService();

while (true) {
  $prompt = $AI->username ? Colors::GREEN . "$AI->username >" . Colors::RESET : Colors::GREEN . ">" . Colors::RESET;
  $input = readline($prompt);
  $cleanInput = strtolower(trim($input));

  if (in_array($cleanInput, ["salir", "cancelar"])) {
    echo Colors::YELLOW . "Botcito: ¡Adiós! Que tengas un gran día." . Colors::RESET . "\n";
    break;
  }

  $response = $AI->ask($cleanInput);

  echo $response;
}
